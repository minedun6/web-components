<!DOCTYPE html>
<html class="" lang="EN">

<head>
	<title>Pearson Web Component</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width" />

	<!-- loads web component polyfills -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.2.0/webcomponents-loader.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.2.0/custom-elements-es5-adapter.js"></script>
	<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>

	<!-- load pearson and global styles -->


	<!-- import web components -->
	<link rel="import" href="index.html" />


</head>

<body>
	<button id="trigger-0" data-trigger="alert" data-severity="error" data-type="global">
		Trigger global error alert
	</button>
	<button id="trigger-1" data-trigger="alert" data-severity="success" data-type="inline">
		Trigger inline success alert
	</button>
	<button id="trigger-2" data-trigger="alert" data-severity="important" data-type="global">
		Trigger global important alert
	</button>

</body>
<script>
	(function (w, doc) {
		const forEach = Array.prototype.forEach;
		const triggers = doc
			.querySelectorAll('button[data-trigger="alert"]');

		function generateAlert(opts) {
			const alert = doc.createElement('pearson-alert');
			for (let attrName in opts) {
				alert.setAttribute(attrName, opts[attrName])
			}
			return alert;
		}

		function triggerAlert(e) {
			const returnNode = `#${e.target.id}`;
			const severity = e.target.dataset.severity;
			const type = e.target.dataset.type;

			const alert = generateAlert({
				returnNode,
				severity,
				type,
				animated: true
			})

			alert.innerHTML = (
				`<h2 id="alertTitle" class="pe-label alert-title">
					<strong>Heads up!</strong>
				</h2>
				<p id="alertText" class="pe-paragraph alert-text">
					<a href="#">Something has happened!</a>
				</p>`
			);

			if (type === 'inline') {
				doc.body.insertBefore(alert, e.target.nextSibling)
			} else {
				doc.body.appendChild(alert)
			}
		}

		forEach.call(triggers, function (trigger) {
			trigger.addEventListener('click', triggerAlert);
		})
	})(window, document);
</script>

</html>